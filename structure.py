from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup
from aiogram.types import KeyboardButton, ReplyKeyboardMarkup

import database

onoff = ['‚ùå', '‚úÖ']


icons = {'–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è': 'üî≠', '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞': 'üìè', '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫': 'üá∑üá∫', '–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ': 'üë•', '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': 'üìö',
         '–ò—Å–ø–∞–Ω—Å–∫–∏–π —è–∑—ã–∫': 'üá™üá∏', '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è': 'üåç', '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è': 'üõ†Ô∏è', '–ò—Å—Ç–æ—Ä–∏—è': 'üìú', '–ò—Å–∫—É—Å—Å—Ç–≤–æ (–ú–•–ö)': 'üèõÔ∏è',
         '–≠–∫–æ–Ω–æ–º–∏–∫–∞': 'üíπ', '–ü—Ä–∞–≤–æ': '‚öñÔ∏è', '–ë–∏–æ–ª–æ–≥–∏—è': 'üçÉ', '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫': 'üá¨üáß', '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —è–∑—ã–∫': 'üáÆüáπ',
         '–ö–∏—Ç–∞–π—Å–∫–∏–π —è–∑—ã–∫': 'üá®üá≥', '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π —è–∑—ã–∫': 'üá´üá∑', '–ù–µ–º–µ—Ü–∫–∏–π —è–∑—ã–∫': 'üá©üá™', '–≠–∫–æ–ª–æ–≥–∏—è': 'üå≥', '–•–∏–º–∏—è': 'üß™',
         '–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞': 'üíª', '–§–∏–∑–∏—á–µ—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞': 'üèÄ', '–§–∏–∑–∏–∫–∞': '‚öõÔ∏è',

         '–ü—Ä–æ–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞': 'üíò',

         '–ê–∫–≤–∞—Ä–µ–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å': 'üñåÔ∏è', '–ê–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∫—É–ª—å–ø—Ç—É—Ä–∞': 'üçØ', '–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ': 'üßë‚Äçüé®',

         '–®–∞—Ö–º–∞—Ç—ã': '‚ôüÔ∏è',

         '–ú–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å': 'üñºÔ∏è', '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞': 'üóø'
         }

subjects = list(icons.keys())

iss_keys = {'–û—Å–Ω–æ–≤—ã –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞–∫–≤–∞—Ä–µ–ª—å–Ω–æ–π –∂–∏–≤–æ–ø–∏—Å–∏': '–ê–∫–≤–∞—Ä–µ–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å',
            '–û—Å–Ω–æ–≤—ã –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞': '–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ',
            '–û—Å–Ω–æ–≤—ã –∞–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Å–∫—É–ª—å–ø—Ç—É—Ä—ã': '–ê–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∫—É–ª—å–ø—Ç—É—Ä–∞',
            '–ú–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∏ —Å—Ç–∞–Ω–∫–æ–≤–∞—è –∂–∏–≤–æ–ø–∏—Å—å': '–ú–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å'}

place_icons = {"–ê–ù–û–û ¬´–§–∏–∑—Ç–µ—Ö-–ª–∏—Ü–µ–π¬ª –∏–º. –ü.–õ. –ö–∞–ø–∏—Ü—ã": ["üíô", "–§–∏–∑—Ç–µ—Ö-–ª–∏—Ü–µ–π"],
               "–≤ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ ¬´–í–µ–±–∏–Ω–∞—Ä¬ª": ["ü§ç", "–û–Ω–ª–∞–π–Ω"],
               "–ê–ù–û–û ¬´–û–±–ª–∞—Å—Ç–Ω–∞—è –≥–∏–º–Ω–∞–∑–∏—è –∏–º. –ï. –ú. –ü—Ä–∏–º–∞–∫–æ–≤–∞¬ª": ["‚ù§Ô∏è", "–ì–∏–º–Ω–∞–∑–∏—è –ü—Ä–∏–º–∞–∫–æ–≤–∞"],
               "–§–ì–ë–û–£ –í–û ¬´–ê–∫–∞–¥–µ–º–∏—è –∞–∫–≤–∞—Ä–µ–ª–∏ –∏ –∏–∑—è—â–Ω—ã—Ö –∏—Å–∫—É—Å—Å—Ç–≤ –°–µ—Ä–≥–µ—è –ê–Ω–¥—Ä–∏—è–∫–∏¬ª": ["üíö", "–ê–∫–∞–¥–µ–º–∏—è –ê–Ω–¥—Ä–∏—è–∫–∏"],
               "–û–û–û ¬´–°–ö –°–∞—Ç—É—Ä–Ω¬ª": ["üíú", "–°–ö –°–∞—Ç—É—Ä–Ω"],
               '–§–ì–ë–û–£ –í–û ¬´–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ø—Ä–æ—Å–≤–µ—â–µ–Ω–∏—è¬ª': ['ü©µ', '–ì–£ –ü—Ä–æ—Å–≤–µ—â–µ–Ω–∏—è']}

title = {
    '–ü–µ—Ä–≤–∞—è': "I",
    '–í—Ç–æ—Ä–∞—è': "II",
    '–¢—Ä–µ—Ç—å—è': "III",
    '–ß–µ—Ç–≤–µ—Ä—Ç–∞—è': "IV",
    '–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è ': '',
    '–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è ': '',
    '–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è ': ''

}

mouth = {' —è–Ω–≤–∞—Ä—è ': '.01.',
         ' —Ñ–µ–≤—Ä–∞–ª—è ': '.02.',
         ' –º–∞—Ä—Ç–∞ ': '.03.',
         ' –∞–ø—Ä–µ–ª—è ': '.04.',
         ' –º–∞—è ': '.05.',
         ' –∏—é–Ω—è ': '.06.',
         ' –∏—é–ª—è ': '.07.',
         ' –∞–≤–≥—É—Å—Ç–∞ ': '.08.',
         ' —Å–µ–Ω—Ç—è–±—Ä—è ': '.09.',
         ' –æ–∫—Ç—è–±—Ä—è ': '.10.',
         ' –Ω–æ—è–±—Ä—è ': '.11.',
         ' –¥–µ–∫–∞–±—Ä—è ': '.12.'}

graph = {'main_menu': ["üî¨ –ù–∞—É–∫–∞", "üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ", "‚öΩ –°–ø–æ—Ä—Ç"],

         "üî¨ –ù–∞—É–∫–∞": ["üåê –Ø–∑—ã–∫–∏", "‚ôæÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—É–∫–∏", "üçÅ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏", "üë• –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏", "üëÄ –ü—Ä–æ—á–µ–µ"],
         "üé® –ò—Å–∫—É—Å—Å—Ç–≤–æ": ['–ê–∫–≤–∞—Ä–µ–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å', '–ê–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∫—É–ª—å–ø—Ç—É—Ä–∞', '–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ',
                         '–ú–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å', '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞'],
         "‚öΩ –°–ø–æ—Ä—Ç": ["–®–∞—Ö–º–∞—Ç—ã"],

         "üåê –Ø–∑—ã–∫–∏": ['–†—É—Å—Å–∫–∏–π —è–∑—ã–∫', '–ò—Å–ø–∞–Ω—Å–∫–∏–π —è–∑—ã–∫', '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫',
                     '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —è–∑—ã–∫', '–ö–∏—Ç–∞–π—Å–∫–∏–π —è–∑—ã–∫', '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π —è–∑—ã–∫', '–ù–µ–º–µ—Ü–∫–∏–π —è–∑—ã–∫'],
         "‚ôæÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—É–∫–∏": ['–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è'],
         "üçÅ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏": ['–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è', '–ë–∏–æ–ª–æ–≥–∏—è', "–≠–∫–æ–ª–æ–≥–∏—è", "–§–∏–∑–∏–∫–∞", "–•–∏–º–∏—è"],
         "üë• –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –Ω–∞—É–∫–∏": ['–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ', '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è', '–ò—Å—Ç–æ—Ä–∏—è', '–ò—Å–∫—É—Å—Å—Ç–≤–æ (–ú–•–ö)', '–≠–∫–æ–Ω–æ–º–∏–∫–∞', '–ü—Ä–∞–≤–æ',
                                  '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞'],
         "üëÄ –ü—Ä–æ—á–µ–µ": ["–ü—Ä–æ–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞", '–§–∏–∑–∏—á–µ—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞']
         }

back_graph = {}
for key in graph:
    for sub in graph[key]:
        back_graph[sub] = key

get_olymps = KeyboardButton(text='üèÖ –û–ª–∏–º–ø–∏–∞–¥—ã')
get_programs = KeyboardButton(text='‚ù§Ô∏è –°–º–µ–Ω—ã')

settings = KeyboardButton(text='üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π')

main_menu = ReplyKeyboardMarkup(keyboard=[[get_olymps, get_programs], [settings]],
                                resize_keyboard=True)
additional = InlineKeyboardButton(
    text=f'‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
    callback_data='more')

confirm_broadcast = InlineKeyboardMarkup(inline_keyboard=[[InlineKeyboardButton(
    text=f'‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å',
    callback_data='confirm')]])

settings = KeyboardButton(text='üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π')

cansel = ReplyKeyboardMarkup(keyboard=[[KeyboardButton(text='‚ùå –û—Ç–º–µ–Ω–∞')]],
                             resize_keyboard=True)


def set_title(data: str):
    for i in title.keys():
        data = data.replace(i, title[i])
    data = data.split('(')[0].replace('–ø—Ä–æ–≥—Ä–∞–º–º–∞', '—Å–º–µ–Ω–∞')
    if data[0] != 'I':
        data = data[0].lower() + data[1:]
    return data


def set_url(url):
    return InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(
            text='–ü–µ—Ä–µ–π—Ç–∏',
            url=url)]])


def set_back(now):
    return [InlineKeyboardButton(
        text='üö™ –ù–∞–∑–∞–¥',
        callback_data=back_graph[now])]


def set_heart(broadcast_id, now):
    return InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(
            text=f'‚ù§Ô∏è - {now}',
            callback_data=broadcast_id)]])


def olymp_button(user_id):
    temp = database.get(user_id, 'olymp')
    if not temp:
        temp = 0
    return InlineKeyboardButton(
        text=f'{onoff[temp]} –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö',
        callback_data='olymp')


def klass_but():
    return InlineKeyboardMarkup(inline_keyboard=[[InlineKeyboardButton(
        text=f'{i} –ö–ª–∞—Å—Å',
        callback_data=f'{i}_klass')] for i in range(2, 12)])


def add_keys(user_id, flag=False):
    temp = database.get(user_id, 'olymp')
    if not temp:
        temp = 0
    olymp = InlineKeyboardButton(
        text=f'{onoff[temp]} –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö',
        callback_data='olymp')
    temp = database.get(user_id, 'class')
    if not temp:
        temp = 0
    if temp == 0:
        klass = InlineKeyboardButton(
            text=f'‚ùå –§–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∞—Å—Å—É',
            callback_data='klass')
    else:
        klass = InlineKeyboardButton(
            text=f'‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∞—Å—Å—É: {temp}',
            callback_data='klass')
    if flag:
        return InlineKeyboardMarkup(inline_keyboard=[[olymp], [klass]])

    return InlineKeyboardMarkup(inline_keyboard=[[olymp], [klass], set_back("üî¨ –ù–∞—É–∫–∞")])


def set_middle_but(now, user_id):
    if now == 'main_menu':
        but = InlineKeyboardMarkup(
            inline_keyboard=[[InlineKeyboardButton(
                text=i,
                callback_data=i)] for i in graph[now]])
        but.inline_keyboard.append([additional])
        return but
    if graph[now][0] in subjects:
        notifs = database.get_notif(user_id)
        but = InlineKeyboardMarkup(
            inline_keyboard=[[InlineKeyboardButton(
                text=f'{icons[i]} {i} - {onoff[notifs[subjects.index(i)]]}',
                callback_data=i)] for i in graph[now]])
        but.inline_keyboard.append(set_back(now))
        return but
    but = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(
            text=i,
            callback_data=i)] for i in graph[now]])
    but.inline_keyboard.append(set_back(now))
    return but


def set_notif(user_id, subject):
    notifs = database.set_notif(user_id, subjects.index(subject))
    now = ''
    for i in graph:
        for j in graph[i]:
            if subject in j:
                now = i
                break

    but = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(
            text=f'{icons[i]} {i} - {onoff[notifs[subjects.index(i)]]}',
            callback_data=i)] for i in graph[now]])
    but.inline_keyboard.append(set_back(now))
    return but


klasses = [f'{i}_klass' for i in range(2, 12)]
hearts = [str(i) for i in range(1000)]

text_start = 'üëã –ü—Ä–∏–≤–µ—Ç, –ø–æ–¥–º–æ—Å–∫–æ–≤–Ω—ã–π –æ–ª–∏–º–ø–∏–∞–¥–Ω–∏–∫!\n\n' \
             '‚ÑπÔ∏è –Ø –±–æ—Ç, –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–º–µ–Ω –≤ –û–¶ –í–∑–ª—ë—Ç –Ω–∞—á–∞–ª–∞ –æ–ª–∏–º–ø–∏–∞–¥ –†–¶–û–ò.\n'
text_start_2 = '‚öôÔ∏è –î–∞–≤–∞–π –≤–∫–ª—é—á–∏–º –Ω—É–∂–Ω—ã–µ –¥–ª—è —Ç–µ–±—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ç—ã —Å–º–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä –≤ –ª—é–±–æ–π —É–¥–æ–±–Ω—ã–π –º–æ–º–µ–Ω—Ç!\n' \
               '–í—ã–±–µ—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é'
text_start_3 = 'üìç –í —Ä–∞–∑–¥–µ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö –∏ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è'

text_settings = '‚öôÔ∏è <b>–ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫</b>\n\n' \
                '‚úèÔ∏è –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã\n\n' \
                '‚ÑπÔ∏è <i>–í –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å <b>–æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö</b> –∏ <b>—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–ª–∞—Å—Å—É</b></i>'
text_wait = "‚è≥ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥—Ä—É–≥–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–º–µ–Ω –∏–ª–∏ –æ–ª–∏–º–ø–∏–∞–¥"

if __name__ == "__main__":
    pass
